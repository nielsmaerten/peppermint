<!DOCTYPE HTML>
<!--
	Ethereal by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>

<head>
  <title>Peppermint - Image lookup</title>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
  <link rel="stylesheet" href="assets/css/main.css" />
  <noscript>
    <link rel="stylesheet" href="assets/css/noscript.css" /></noscript>
</head>

<body class="is-preload">

  <!-- Page Wrapper -->
  <div id="page-wrapper">

    <!-- Wrapper -->
    <div id="wrapper" ondrop="dropHandler(event);" ondragover="dragOverHandler(event);">

      <!-- Panel (Banner) -->
      <section class="panel banner right">
        <div class="content color0 span-3-75">
          <h1 class="major">Peppermint : <br> Image lookup</h1>
          <p>
            Drop an image from the <strong>Peppermint Wallpapers</strong> directory on this page
            to find its original post on Reddit
          </p>
          <ul class="actions">
            <li><a href="/" class="button primary color1 icon fa-angle-left">Back</a></li>
          </ul>
        </div>
        <div class="image filtered span-1-75" data-position="25% 25%">
          <img data-src="https://us-central1-peppermint-wallpapers.cloudfunctions.net/websiteImage?img=12" alt="" />
        </div>
      </section>

      <!-- Panel (Spotlight) -->
      <section class="panel spotlight small left" id="settings">
        <div class="content span-10">
          <form action="https://us-central1-peppermint-wallpapers.cloudfunctions.net/lookupImageCredits" method="GET">
            <p>
              <div class="field half">
                <label for="id">Or, enter a wallpaper ID</label>
                <input type="text" name="id" id="imageId">
              </div>
            </p>
            <button type="submit" class="button primary color2 circle icon fa-search">Search</button>
          </form>
        </div>
        <div class="image filtered tinted" data-position="top right">
          <img data-src="https://us-central1-peppermint-wallpapers.cloudfunctions.net/websiteImage?img=13" alt="" />
        </div>
      </section>
    </div>

  </div>

  <a href="https://github.com/nielsmaerten/peppermint"><img style="position: fixed; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png"
      alt="Fork me on GitHub"></a>

  <!-- Scripts -->
  <script src="assets/js/jquery.min.js"></script>
  <script src="assets/js/browser.min.js"></script>
  <script src="assets/js/breakpoints.min.js"></script>
  <script src="assets/js/main.js"></script>

  <script>
    function dropHandler(ev) {
      console.log('File(s) dropped');

      // Prevent default behavior (Prevent file from being opened)
      ev.preventDefault();

      if (ev.dataTransfer.items) {
        // Use DataTransferItemList interface to access the file(s)
        for (var i = 0; i < ev.dataTransfer.items.length; i++) {
          // If dropped items aren't files, reject them
          if (ev.dataTransfer.items[i].kind === 'file') {
            var file = ev.dataTransfer.items[i].getAsFile();
            lookup(file.name)
          }
        }
      } else {
        // Use DataTransfer interface to access the file(s)
        for (var i = 0; i < ev.dataTransfer.files.length; i++) {
          lookup(ev.dataTransfer.files[i].name);
        }
      }
    }
    function dragOverHandler(ev) {
      // Prevent default behavior (Prevent file from being opened)
      ev.preventDefault();
    }

    function lookup(filename) {
      var id = /[a-zA-Z0-9]+/.exec(filename)[0]
      var url =
        "https://us-central1-peppermint-wallpapers.cloudfunctions.net/lookupImageCredits?id=" +
        id
      console.log("Redirecting...", url)
      debugger;
      window.location.href = url
    }

  </script>

</body>

</html>
